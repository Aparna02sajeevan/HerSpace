{% extends 'base.html' %}
{% load static %}

{% block content %}

<style>
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    .fade-in { animation: fadeIn 0.8s ease-out; }
    
    .glass-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: 0 20px 60px rgba(106, 90, 205, 0.15);
    }

    .playlist-item {
        transition: all 0.3s ease;
        cursor: pointer;
        animation: fadeIn 0.8s ease-out;
    }

    .playlist-item:hover {
        transform: translateX(8px);
        background: rgba(106, 90, 205, 0.05);
    }

    .playing {
        animation: pulse 1.5s infinite;
    }
</style>

<div class="max-w-4xl mx-auto">
    
    <!-- Header -->
    <div class="fade-in text-center mb-12">
        <h1 class="text-6xl font-bold text-gray-900 mb-3" style="font-family: 'Playfair Display', serif;">
            üéµ Wellness Music
        </h1>
        <p class="text-lg text-gray-600">Curated playlists for your mood and wellbeing</p>
    </div>

    <!-- Audio Player -->
    <div class="fade-in glass-card rounded-2xl p-8 md:p-12 shadow-lg mb-12">
        <div class="mb-8">
            <div id="currentTrack" class="text-center mb-6">
                <p class="text-sm text-gray-600 mb-2">Now Playing</p>
                <h2 class="text-2xl font-bold text-gray-900">Select a Playlist</h2>
            </div>

            <audio id="audioPlayer" class="w-full" controls style="border-radius: 12px;">
                Your browser does not support the audio element.
            </audio>
        </div>

        <!-- Playback Controls -->
        <div class="flex justify-center gap-4 mb-8">
            <button onclick="document.getElementById('audioPlayer').currentTime = 0" 
                class="px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg transition-all">
                ‚èÆÔ∏è Restart
            </button>
            <button id="togglePlay" 
                class="px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-all">
                ‚ñ∂Ô∏è Play
            </button>
            <button id="muteBtn" 
                class="px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-lg transition-all">
                üîä Mute
            </button>
        </div>

        <!-- Volume Control -->
        <div class="flex items-center justify-center gap-4">
            <span class="text-sm text-gray-600">Volume</span>
            <input type="range" id="volumeControl" min="0" max="100" value="70" class="w-48"
                oninput="document.getElementById('audioPlayer').volume = this.value / 100">
        </div>
    </div>

    <!-- Playlists -->
    <div>
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Choose Your Vibe</h2>

        <div class="space-y-4">

            <!-- Relaxation Playlist -->
            <div class="fade-in glass-card rounded-2xl p-6 shadow-lg" style="animation-delay: 0.1s;">
                <button onclick="playPlaylist('relaxation')" class="w-full text-left">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <span class="text-4xl">üßò‚Äç‚ôÄÔ∏è</span>
                            <div>
                                <h3 class="text-xl font-bold text-gray-900">Relaxation & Calm</h3>
                                <p class="text-gray-600">Gentle ambient sounds for meditation and stress relief</p>
                            </div>
                        </div>
                        <span class="text-2xl">‚Üí</span>
                    </div>
                </button>
            </div>

            <!-- Focus Playlist -->
            <div class="fade-in glass-card rounded-2xl p-6 shadow-lg" style="animation-delay: 0.2s;">
                <button onclick="playPlaylist('focus')" class="w-full text-left">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <span class="text-4xl">üéØ</span>
                            <div>
                                <h3 class="text-xl font-bold text-gray-900">Focus & Concentration</h3>
                                <p class="text-gray-600">Lo-fi beats and instrumental music for productivity</p>
                            </div>
                        </div>
                        <span class="text-2xl">‚Üí</span>
                    </div>
                </button>
            </div>

            <!-- Energetic Playlist -->
            <div class="fade-in glass-card rounded-2xl p-6 shadow-lg" style="animation-delay: 0.3s;">
                <button onclick="playPlaylist('energetic')" class="w-full text-left">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <span class="text-4xl">‚ö°</span>
                            <div>
                                <h3 class="text-xl font-bold text-gray-900">Energetic & Uplifting</h3>
                                <p class="text-gray-600">Upbeat music to boost your mood and motivation</p>
                            </div>
                        </div>
                        <span class="text-2xl">‚Üí</span>
                    </div>
                </button>
            </div>

            <!-- Sleep Playlist -->
            <div class="fade-in glass-card rounded-2xl p-6 shadow-lg" style="animation-delay: 0.4s;">
                <button onclick="playPlaylist('sleep')" class="w-full text-left">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <span class="text-4xl">üò¥</span>
                            <div>
                                <h3 class="text-xl font-bold text-gray-900">Sleep & Rest</h3>
                                <p class="text-gray-600">Soothing soundscapes for a peaceful night's sleep</p>
                            </div>
                        </div>
                        <span class="text-2xl">‚Üí</span>
                    </div>
                </button>
            </div>

        </div>
    </div>

    <!-- Back Button -->
    <div class="text-center mt-12">
        <a href="{% url 'dashboard' %}" class="text-purple-600 hover:text-purple-700 font-semibold">‚Üê Back to Dashboard</a>
    </div>

</div>

<script>
    const audioPlayer = document.getElementById('audioPlayer');
    const togglePlayBtn = document.getElementById('togglePlay');
    const muteBtn = document.getElementById('muteBtn');
    const currentTrackDiv = document.getElementById('currentTrack');

    // Sample playlist URLs (replace with actual URLs or integrate a music service)
    const playlists = {
        relaxation: {
            name: 'Relaxation & Calm',
            tracks: [
                { name: 'Relaxing Instrumental', url: "{% static 'sounds/relaxing-instrumental-music-backsound-11-215393.mp3' %}" },
                { name: 'Peaceful Morning', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3' },
                { name: 'Ambient Waves', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3' },
            ]
        },
        focus: {
            name: 'Focus & Concentration',
            tracks: [
                { name: 'Lo-Fi Study', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3' },
                { name: 'Instrumental Focus', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3' },
            ]
        },
        energetic: {
            name: 'Energetic & Uplifting',
            tracks: [
                { name: 'Upbeat Vibes', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3' },
                { name: 'Feel Good Music', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3' },
            ]
        },
        sleep: {
            name: 'Sleep & Rest',
            tracks: [
                { name: 'Sleepy Dreams', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3' },
                { name: 'Night Sounds', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3' },
            ]
        }
    };

    function playPlaylist(playlistKey) {
        const playlist = playlists[playlistKey];
        if (playlist && playlist.tracks.length > 0) {
            audioPlayer.src = playlist.tracks[0].url;
            currentTrackDiv.innerHTML = `
                <p class="text-sm text-gray-600 mb-2">Now Playing</p>
                <h2 class="text-2xl font-bold text-gray-900">${playlist.name}</h2>
                <p class="text-sm text-gray-500 mt-2">${playlist.tracks[0].name}</p>
            `;
            audioPlayer.play();
            togglePlayBtn.innerText = '‚è∏Ô∏è Pause';
        }
    }

    togglePlayBtn.onclick = () => {
        if (audioPlayer.paused) {
            audioPlayer.play();
            togglePlayBtn.innerText = '‚è∏Ô∏è Pause';
        } else {
            audioPlayer.pause();
            togglePlayBtn.innerText = '‚ñ∂Ô∏è Play';
        }
    };

    muteBtn.onclick = () => {
        audioPlayer.muted = !audioPlayer.muted;
        muteBtn.innerText = audioPlayer.muted ? 'üîá Unmute' : 'üîä Mute';
    };

    audioPlayer.onplay = () => {
        togglePlayBtn.innerText = '‚è∏Ô∏è Pause';
    };

    audioPlayer.onpause = () => {
        togglePlayBtn.innerText = '‚ñ∂Ô∏è Play';
    };
</script>

{% endblock %}
